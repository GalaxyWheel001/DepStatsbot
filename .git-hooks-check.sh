#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º - –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç—ã..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º credentials.json
if git diff --cached --name-only | grep -E "credentials\.json|token\.json|\.env$"; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã!"
    echo ""
    echo "–ù–∞–π–¥–µ–Ω—ã:"
    git diff --cached --name-only | grep -E "credentials\.json|token\.json|\.env$"
    echo ""
    echo "–≠—Ç–∏ —Ñ–∞–π–ª—ã –ù–ï –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞–¥–∞—Ç—å –≤ Git!"
    echo ""
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ staged —Ñ–∞–π–ª–∞—Ö
if git diff --cached | grep -E "BEGIN (PRIVATE|RSA) KEY|service_account.*private_key"; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –ù–∞–π–¥–µ–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ staged –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö!"
    echo ""
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π"
    echo ""
    exit 1
fi

echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞"
exit 0

